<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Portal - IIT Mode</title>
    
    <link rel="stylesheet" href="style.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> 
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body oncontextmenu="return false;">

    <div id="auth-view" class="login-wrapper">
        <div class="dash-card" style="text-align:center; max-width:400px;">
            <h2 style="color:var(--primary); margin-bottom:10px;">IIT Assessment Portal</h2>
            <p style="color:var(--gray); margin-bottom:20px;">Secure Login for Students</p>
            <button id="login-btn" class="btn btn-outline" style="width:100%">
                <i class="fab fa-google" style="color:#DB4437"></i> Sign in with Google
            </button>
        </div>
    </div>

    <div id="dashboard-view" class="container hidden">
        <header class="dashboard-header">
            <div class="user-welcome">
                <h2>Welcome, <span id="user-name-display">Student</span></h2>
                <p>Your Exam Dashboard</p>
            </div>
            <button id="logout-btn" class="btn btn-outline">
                <i class="fa fa-sign-out-alt"></i> Logout
            </button>
        </header>

        <section style="margin-bottom: 40px;">
            <h4 style="color:var(--gray); text-transform:uppercase; margin-bottom:15px; border-left:4px solid var(--primary); padding-left:10px;">Available Exams</h4>
            <div id="exam-list" class="grid"></div>
        </section>

        <section>
            <h4 style="color:var(--gray); text-transform:uppercase; margin-bottom:15px; border-left:4px solid var(--success); padding-left:10px;">Performance History</h4>
            <div id="history-list" class="grid"></div>
        </section>
    </div>

    <div id="exam-view" class="hidden">
        <div class="exam-header">
            <div style="display:flex; align-items:center; gap:15px;">
                <button id="toggle-sidebar" class="btn btn-outline btn-icon"><i class="fa fa-bars"></i></button>
                <div id="exam-title" style="font-weight:bold; font-size:1.1rem;">Physics Test</div>
            </div>
            
            <div style="display:flex; align-items:center; gap:15px;">
                <div id="timer" class="timer-badge">00:00:00</div>
                <button id="submit-btn" class="btn btn-success">Submit</button>
            </div>
        </div>

        <div class="exam-layout">
            <div class="question-area" id="q-area"></div>
            <div class="sidebar" id="palette"></div>
        </div>
    </div>

    <div id="analysis-overview" class="container hidden">
        <div class="dashboard-header">
            <h2 style="color:var(--dark)">Performance Analysis</h2>
            <button class="btn btn-outline" onclick="location.reload()">Back to Dashboard</button>
        </div>

        <div class="analysis-header">
            <div>
                <p style="color:var(--gray)">Your Score</p>
                <div class="score-big" id="an-score">0/0</div>
            </div>
            <div>
                <p style="color:var(--gray)">All India Rank (Est)</p>
                <div class="rank-badge" id="an-rank"># -</div>
            </div>
            <div style="text-align:right">
                <p style="color:var(--gray)">Accuracy</p>
                <div style="font-size:1.5rem; font-weight:bold" id="an-accuracy">0%</div>
            </div>
        </div>

        <h3>Question Map (Click to View Solution)</h3>
        <div class="analysis-grid" id="an-grid"></div>
    </div>

    <div id="analysis-detail" class="container hidden">
        <div class="dashboard-header">
            <h2 style="color:var(--dark)">Detailed Solution</h2>
            <button class="btn btn-outline" onclick="backToAnalysisGrid()">Back to Scorecard</button>
        </div>
        
        <div id="sol-content" class="solution-view"></div>

        <div style="margin-top:20px; display:flex; justify-content:space-between">
            <button class="btn btn-outline" id="prev-sol-btn">Previous</button>
            <button class="btn btn-primary" id="next-sol-btn">Next</button>
        </div>
    </div>

    <script type="module" src="student.js"></script>
</body>
</html>